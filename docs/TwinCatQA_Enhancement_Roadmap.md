# TwinCatQA 개선 로드맵

> **작성일**: 2025-11-27
> **목적**: 조직 전체 표준화를 위한 TwinCatQA 도구 개선
> **대상 사용자**: 100+ 개발자
> **일정**: 여유 있음 (품질 중심)

---

## 목차

1. [요구사항 요약](#1-요구사항-요약)
2. [전략적 방향](#2-전략적-방향)
3. [Phase별 로드맵](#3-phase별-로드맵)
4. [상세 작업 목록](#4-상세-작업-목록)
5. [성공 지표](#5-성공-지표)

---

## 1. 요구사항 요약

### 1.1 우선순위 영역

```
┌─────────────────────────────────────────────────────────────┐
│                    우선순위 매트릭스                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  높음  │  테스트 강화      │  IDE 통합          │           │
│  영향  │  ⭐ 1순위         │  ⭐ 2순위          │           │
│       │                   │                    │           │
│  ─────┼───────────────────┼────────────────────┤           │
│       │                   │                    │           │
│  낮음  │  보안 수정        │  플러그인 시스템   │           │
│  영향  │  (백그라운드)     │  ⭐ 3순위          │           │
│       │                   │                    │           │
│       └───────────────────┴────────────────────┘           │
│              낮음 긴급도           높음 긴급도               │
└─────────────────────────────────────────────────────────────┘
```

### 1.2 핵심 요구사항

| 영역 | 요구사항 | 현재 상태 | 목표 |
|------|---------|----------|------|
| **테스트** | 커버리지 향상 | 70% | 90%+ |
| **테스트** | E2E 테스트 확장 | 제한적 | 20+ 시나리오 |
| **테스트** | 성능/부하 테스트 | 없음 | 벤치마크 10개 |
| **IDE** | Visual Studio 통합 | 없음 | VSIX Extension |
| **IDE** | TwinCAT XAE 통합 | 없음 | Automation Interface |
| **확장성** | 사용자 정의 규칙 | 하드코딩 | 플러그인 시스템 |
| **확장성** | 다국어 지원 | 한글만 | 한글/영어 |
| **확장성** | API 제공 | 없음 | REST/gRPC |

---

## 2. 전략적 방향

### 2.1 핵심 원칙

```
┌─────────────────────────────────────────────────────────────┐
│                    개발 원칙                                 │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1. 품질 우선 (Quality First)                               │
│     - 서두르지 않고 견고한 기반 구축                         │
│     - 테스트 주도 개발 (TDD)                                │
│     - 철저한 코드 리뷰                                      │
│                                                             │
│  2. 점진적 배포 (Incremental Delivery)                      │
│     - 각 Phase 완료 후 실사용 피드백 수집                    │
│     - 작은 릴리즈, 빠른 반복                                │
│     - 위험 최소화                                           │
│                                                             │
│  3. 확장 가능한 설계 (Extensible Design)                    │
│     - 플러그인 아키텍처                                     │
│     - 표준화된 API                                          │
│     - 모듈형 구조                                           │
│                                                             │
│  4. 개발자 경험 (Developer Experience)                      │
│     - 직관적 UI/UX                                          │
│     - 상세한 문서화                                         │
│     - 빠른 피드백 루프                                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 기술 스택 확장

| 현재 | 추가 예정 |
|------|----------|
| .NET 8/9 | Visual Studio SDK |
| xUnit | BenchmarkDotNet |
| WPF | MEF (플러그인) |
| CLI | ASP.NET Core (API) |
| LibGit2Sharp | TwinCAT Automation Interface |

---

## 3. Phase별 로드맵

### 3.1 전체 일정 개요

```
┌─────────────────────────────────────────────────────────────┐
│                    24주 마스터 플랜                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Phase 1: 테스트 기반 강화 (Week 1-6)                       │
│  ████████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░  25%   │
│                                                             │
│  Phase 2: IDE 통합 프로토타입 (Week 7-12)                   │
│  ░░░░░░░░░░░░████████████░░░░░░░░░░░░░░░░░░░░░░░░░░  50%   │
│                                                             │
│  Phase 3: 플러그인 시스템 (Week 13-18)                      │
│  ░░░░░░░░░░░░░░░░░░░░░░░░████████████░░░░░░░░░░░░░░  75%   │
│                                                             │
│  Phase 4: 통합 및 안정화 (Week 19-24)                       │
│  ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░████████████░░  100%  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 Phase 1: 테스트 기반 강화 (Week 1-6)

**목표**: 70% → 90%+ 커버리지, CI/CD 자동화

```
Week 1-2: 인프라 구축
├── CI/CD 파이프라인 설정 (GitHub Actions)
├── 코드 커버리지 자동화 (Codecov)
├── BenchmarkDotNet 프로젝트 추가
└── 기존 테스트 정리 (비활성화된 테스트 제거)

Week 3-4: 핵심 테스트 추가
├── Domain 계층 테스트 (+15개)
├── Infrastructure 계층 테스트 (+30개)
│   ├── Parser 테스트 (+15개)
│   ├── Git 통합 테스트 (+10개)
│   └── 리포트 생성 테스트 (+5개)
└── Application 계층 테스트 (+10개)

Week 5-6: E2E 및 성능 테스트
├── E2E 시나리오 테스트 (+20개)
├── 성능 벤치마크 (+10개)
├── 부하 테스트 설정
└── Mutation Testing (Stryker.NET)
```

**산출물**:
- 테스트 커버리지 90%+
- CI/CD 파이프라인
- 성능 벤치마크 기준선
- Mutation Score 80%+

### 3.3 Phase 2: IDE 통합 프로토타입 (Week 7-12)

**목표**: Visual Studio Extension 알파 버전

```
Week 7-8: VSIX 기초
├── Visual Studio SDK 프로젝트 생성
├── 기본 Tool Window 구현
├── 메뉴 및 명령어 등록
└── TwinCatQA.Core 참조 통합

Week 9-10: 분석 통합
├── 문서 변경 감지 (IVsTextViewCreationListener)
├── 백그라운드 분석 서비스
├── Error List 통합
├── Squiggles (에디터 표시) 구현
└── 증분 분석 엔진

Week 11-12: 사용자 경험
├── 옵션 페이지 (설정 UI)
├── 분석 결과 뷰어
├── 규칙 설정 UI
├── 다국어 리소스 (한글/영어)
└── 알파 테스트 (5-10명)
```

**산출물**:
- VSIX 패키지 알파 버전
- 실시간 코드 분석
- 설정 UI
- 다국어 지원

### 3.4 Phase 3: 플러그인 시스템 (Week 13-18)

**목표**: 사용자 정의 규칙 시스템 완성

```
Week 13-14: 플러그인 코어
├── TwinCatQA.Plugin.Core 프로젝트 생성
├── 어셈블리 로더 구현
├── 플러그인 레지스트리
├── 생명주기 관리자
└── 기존 규칙 플러그인화

Week 15-16: 설정 시스템
├── YAML/JSON 설정 파서
├── JSON Schema 정의
├── 환경 변수 치환
├── 프로필 시스템 (dev, ci, prod)
└── 설정 검증

Week 17-18: 배포 시스템
├── NuGet 패키지 템플릿
├── 소스 코드 규칙 로더 (Roslyn)
├── Private NuGet Feed 설정
├── 자동 업데이트 메커니즘
└── 예제 규칙 패키지 3개
```

**산출물**:
- 플러그인 시스템
- 설정 파일 스키마
- NuGet 패키지 템플릿
- 예제 규칙 패키지

### 3.5 Phase 4: 통합 및 안정화 (Week 19-24)

**목표**: 프로덕션 릴리즈 준비

```
Week 19-20: TwinCAT XAE 통합
├── Automation Interface 래퍼
├── PLC 프로젝트 파싱
├── 실시간 동기화
└── XAE 통합 테스트

Week 21-22: API 서비스
├── REST API 컨트롤러
├── gRPC 서비스
├── OpenAPI 문서
├── API 인증 (JWT)
└── Rate Limiting

Week 23-24: 최종 안정화
├── 베타 테스트 (50명)
├── 성능 최적화
├── 문서화 완성
├── 배포 자동화
└── 교육 자료 작성
```

**산출물**:
- TwinCAT XAE 통합
- REST/gRPC API
- 최종 문서
- 교육 자료

---

## 4. 상세 작업 목록

### 4.1 Phase 1 상세 작업

#### Week 1-2: 인프라 구축

| 작업 ID | 작업명 | 예상 시간 | 담당 |
|---------|--------|----------|------|
| T1-01 | GitHub Actions 워크플로우 생성 | 4h | DevOps |
| T1-02 | Codecov 연동 | 2h | DevOps |
| T1-03 | BenchmarkDotNet 프로젝트 추가 | 3h | QA |
| T1-04 | DefaultValidationEngineTests 정리 | 2h | QA |
| T1-05 | SonarQube 연동 | 4h | DevOps |
| T1-06 | 테스트 리포트 자동 생성 | 2h | DevOps |
| T1-07 | Git hooks (pre-commit 테스트) | 2h | DevOps |
| T1-08 | 테스트 컨벤션 문서 작성 | 3h | QA |

#### Week 3-4: 핵심 테스트 추가

| 작업 ID | 작업명 | 테스트 수 | 예상 시간 |
|---------|--------|----------|----------|
| T1-09 | ValidationSession 테스트 | 5개 | 4h |
| T1-10 | Violation 도메인 테스트 | 5개 | 4h |
| T1-11 | Variable 도메인 테스트 | 5개 | 4h |
| T1-12 | STParser 테스트 | 15개 | 12h |
| T1-13 | LibGit2Service 테스트 | 10개 | 8h |
| T1-14 | ReportGenerator 테스트 | 5개 | 4h |
| T1-15 | FileScanner 테스트 | 5개 | 4h |
| T1-16 | ConfigurationService 테스트 | 5개 | 4h |

#### Week 5-6: E2E 및 성능 테스트

| 작업 ID | 작업명 | 테스트 수 | 예상 시간 |
|---------|--------|----------|----------|
| T1-17 | 전체 QA 워크플로우 E2E | 5개 | 8h |
| T1-18 | Git Pre-commit Hook E2E | 3개 | 4h |
| T1-19 | 대용량 프로젝트 E2E | 3개 | 4h |
| T1-20 | 증분 분석 E2E | 3개 | 4h |
| T1-21 | CLI 명령어 E2E | 6개 | 6h |
| T1-22 | Parser 성능 벤치마크 | 3개 | 4h |
| T1-23 | 규칙 실행 벤치마크 | 3개 | 4h |
| T1-24 | 리포트 생성 벤치마크 | 2개 | 3h |
| T1-25 | 메모리 사용량 벤치마크 | 2개 | 3h |
| T1-26 | Stryker.NET Mutation Testing 설정 | - | 4h |

### 4.2 Phase 2 상세 작업

#### Week 7-8: VSIX 기초

| 작업 ID | 작업명 | 예상 시간 |
|---------|--------|----------|
| T2-01 | VSIX 프로젝트 생성 | 2h |
| T2-02 | source.extension.vsixmanifest 설정 | 1h |
| T2-03 | AsyncPackage 구현 | 4h |
| T2-04 | Tool Window 기본 구현 | 6h |
| T2-05 | 메뉴 명령어 등록 | 4h |
| T2-06 | TwinCatQA.Core 참조 통합 | 4h |
| T2-07 | VSIX 디버깅 환경 설정 | 2h |
| T2-08 | 기본 UI 레이아웃 | 6h |

#### Week 9-10: 분석 통합

| 작업 ID | 작업명 | 예상 시간 |
|---------|--------|----------|
| T2-09 | IVsTextViewCreationListener 구현 | 4h |
| T2-10 | 문서 변경 이벤트 처리 | 4h |
| T2-11 | 백그라운드 분석 서비스 | 8h |
| T2-12 | 증분 분석 엔진 | 10h |
| T2-13 | Error List Provider 구현 | 6h |
| T2-14 | ITagger<IErrorTag> 구현 | 6h |
| T2-15 | 분석 결과 캐싱 | 4h |
| T2-16 | 분석 취소 처리 | 3h |

#### Week 11-12: 사용자 경험

| 작업 ID | 작업명 | 예상 시간 |
|---------|--------|----------|
| T2-17 | DialogPage 옵션 UI | 6h |
| T2-18 | 분석 결과 뷰어 UI | 8h |
| T2-19 | 규칙 설정 UI | 6h |
| T2-20 | TreeView 필터링/검색 | 4h |
| T2-21 | 한글 리소스 파일 | 3h |
| T2-22 | 영어 리소스 파일 | 3h |
| T2-23 | 리소스 전환 로직 | 2h |
| T2-24 | 알파 테스트 진행 | 8h |
| T2-25 | 피드백 반영 및 버그 수정 | 12h |

---

## 5. 성공 지표

### 5.1 정량적 KPI

| 지표 | 현재 | Phase 1 | Phase 2 | Phase 3 | Phase 4 |
|------|------|---------|---------|---------|---------|
| **테스트 커버리지** | 70% | 90% | 90% | 92% | 95% |
| **테스트 케이스 수** | 170개 | 300개 | 320개 | 350개 | 400개 |
| **Mutation Score** | N/A | 80% | 82% | 85% | 88% |
| **CI 빌드 성공률** | N/A | 95% | 96% | 97% | 99% |
| **평균 분석 시간** | 5초 | 4초 | 2초 | 1.5초 | 1초 |
| **사용자 정의 규칙** | 0개 | 0개 | 0개 | 3개 예제 | 10개+ |
| **IDE 통합 사용자** | 0명 | 0명 | 10명 | 30명 | 100명+ |

### 5.2 정성적 목표

| 영역 | 목표 |
|------|------|
| **개발자 경험** | IDE에서 실시간 피드백, 직관적 UI |
| **확장성** | 코드 변경 없이 새 규칙 추가 가능 |
| **성능** | 1000개 POU 프로젝트 30초 내 분석 |
| **안정성** | 99.9% 가동 시간, 크래시 없음 |
| **문서화** | 모든 기능에 대한 상세 가이드 |

### 5.3 마일스톤 체크포인트

```
┌─────────────────────────────────────────────────────────────┐
│                    마일스톤 체크포인트                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ✓ M1 (Week 6): 테스트 기반 완성                            │
│    □ 커버리지 90%+                                          │
│    □ CI/CD 자동화                                           │
│    □ 성능 기준선 수립                                        │
│                                                             │
│  ✓ M2 (Week 12): IDE 통합 알파                              │
│    □ VSIX 알파 버전                                         │
│    □ 실시간 분석                                            │
│    □ 10명 알파 테스트                                        │
│                                                             │
│  ✓ M3 (Week 18): 플러그인 시스템 완성                       │
│    □ 플러그인 로더                                          │
│    □ 설정 시스템                                            │
│    □ 예제 규칙 패키지                                        │
│                                                             │
│  ✓ M4 (Week 24): 프로덕션 릴리즈                            │
│    □ 베타 테스트 완료                                        │
│    □ 문서화 완성                                            │
│    □ 100+ 사용자 배포                                        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 부록

### A. 생성된 설계 문서

| 문서 | 위치 |
|------|------|
| 테스트 강화 전략 | `docs/TwinCatQA_Test_Enhancement_Strategy.md` |
| IDE 통합 아키텍처 | `docs/TwinCatQA_IDE_Integration_Architecture.md` |
| 플러그인 시스템 Part 1 | `docs/TwinCatQA_Plugin_System_Design.md` |
| 플러그인 시스템 Part 2 | `docs/TwinCatQA_Plugin_System_Design_Part2.md` |
| 플러그인 시스템 Part 3 | `docs/TwinCatQA_Plugin_System_Design_Part3.md` |

### B. 리스크 완화 전략

| 리스크 | 영향 | 완화 전략 |
|--------|------|----------|
| Visual Studio SDK 학습 곡선 | 중간 | 프로토타입 먼저 개발, 문서 학습 |
| TwinCAT Automation Interface 제한 | 높음 | 조기 검증, 대안 방안 준비 |
| 플러그인 호환성 문제 | 중간 | 버전 관리, 격리된 로딩 |
| 성능 이슈 (대용량 프로젝트) | 높음 | 증분 분석, 캐싱, 병렬 처리 |
| 사용자 채택 저조 | 중간 | 조기 피드백, 교육, 문서화 |

### C. 다음 액션 아이템

**즉시 시작 (이번 주)**:
1. [ ] GitHub Actions 워크플로우 생성
2. [ ] Codecov 연동
3. [ ] DefaultValidationEngineTests 정리
4. [ ] BenchmarkDotNet 프로젝트 추가

---

> **문서 버전**: 1.0
> **작성일**: 2025-11-27
> **다음 검토**: Phase 1 완료 시점
